// Generated by CoffeeScript 1.10.0
(function() {
  var nth, path, spawn;

  spawn = require('child_process').spawn;

  path = require('path');

  nth = (function(_this) {
    return function(i, list) {
      return list[i];
    };
  })(this);

  module.exports = (function(_this) {
    return function(file) {
      var data, err, proc, result;
      proc = spawn('alpr', ['-j', file]);
      data = '';
      err = '';
      proc.stdout.on('data', function(d) {
        return data += d;
      });
      proc.stderr.on('data', function(d) {
        return err += d;
      });
      result = new Promise(function(resolve, reject) {
        return proc.on('close', function(code) {
          if (code === 0) {
            return resolve(data);
          } else {
            return reject(err);
          }
        });
      });
      return result.then(JSON.parse);
    };
  })(this);

}).call(this);
